{% extends 'common/index.html' %} 

{% block extra_head %}
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css">
<script src="//cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $('#results_table').DataTable({
            "bPaginate": false,
            "bInfo": false,
            {% if search_by_smiles %}
            "order": [[ 2, "desc" ]]
            {% endif %}
        });
    });
</script>
{% endblock %}

{% block body %}
<div class="container mt-3">
    <div class="row">
        <div class="col-md-6"><h4 class="text-success">Your Query:</h4></div>
        <div class="col-md-6">
            <h5 class="pt-2 text-muted text-right">
            &nbsp;Page {{ page }} of {{ total_pages }}
            </h5>
        </div>
    </div>
    {% include 'chemical/query_info.html' %}
    
    <table class="table table-striped table-hover table-expandable dataTable no-footer" id="results_table" role="grid">
        <thead class="thead">
            <tr>
                <th>PubChem ID</th>
                <th>Common Name</th>
                {% if search_by_smiles %}
                <th>Similarity</th>
                {% endif %}
                <th>Details</th>
            </tr>
        </thead>
        <tbody>
            {% for chemical, sim_coeff in results %}
            <tr>
                <td>
                    <a target="_blank" href="https://pubchem.ncbi.nlm.nih.gov/compound/{{ chemical.pubchem_id }}">{{ chemical.pubchem_id }}
				</a>
                </td>
                <td>
                    {{ chemical.common_name }}
                </td>
                {% if search_by_smiles %}
                <td>
                    {{ sim_coeff }}
                </td>
                {% endif %}
                <td>
                    <a href={{ url_for('get_chemical', pubchem_id=chemical.pubchem_id) }} target="_blank">
                        <button type="button" class="btn btn-info btn-xs molecules_details">
                            Details
                        </button>
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <h6 class="pt-4 text-muted">
        &nbsp;Page {{ page }} of {{ total_pages }}
    </h6>

    <div class="pagination">
        <nav aria-label="Page navigation">
            <ul class="pagination">

                {% if prev_url %}
                <li class="page-item"><a class="page-link" href="{{ prev_url }}">previous</a></li>
                {% endif %}
                {% if first_url %}
                <li class="page-item"><a class="page-link" href="{{ first_url }}">first</a></li>
                {% endif %}
                {% if next_url %}
                <li class="page-item"><a class="page-link" href="{{ next_url }}&{{ request.url.split('submit_search?')[1] }}">next</a></li>
                {% endif %}
                {% if last_url %}
                <li class="page-item"><a class="page-link" href="{{ last_url }}">last</a></li>
                {% endif %}
            </ul>
        </nav>
        <span class="step-links"></span>
	</div>
</div>
{% endblock %}